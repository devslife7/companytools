generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
}

model Cocktail {
  id           Int            @id @default(autoincrement())
  name         String         @unique @db.VarChar(255)
  method       CocktailMethod @default(Build)
  createdAt    DateTime       @default(now()) @map("created_at")
  updatedAt    DateTime       @updatedAt @map("updated_at")
  createdBy    String?        @map("created_by") @db.VarChar(255)
  isActive     Boolean        @default(true) @map("is_active")
  tags         String[]       @default([])
  category     String?        @db.VarChar(100)
  featured     Boolean        @default(false)
  image        String?        @db.VarChar(255)
  instructions String?
  glass        String?        @db.VarChar(100)
  ingredients  Ingredient[]

  @@index([name])
  @@index([isActive])
  @@index([category])
  @@index([featured])
  @@map("cocktails")
}

model Ingredient {
  id            Int      @id @default(autoincrement())
  cocktailId    Int      @map("cocktail_id")
  name          String   @db.VarChar(255)
  amount        Decimal  @db.Decimal(10, 3)
  orderIndex    Int      @map("order_index")
  unit          String?  @map("unit") @db.VarChar(50)
  preferredUnit String?  @map("preferred_unit") @db.VarChar(50)
  cocktail      Cocktail @relation(fields: [cocktailId], references: [id], onDelete: Cascade)

  @@index([cocktailId])
  @@index([name])
  @@map("ingredients")
}

enum CocktailMethod {
  Shake
  Build
}
